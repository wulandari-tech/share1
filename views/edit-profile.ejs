<%- include('./partials/header') %>

<div class="max-w-2xl mx-auto bg-gray-800 p-8 rounded-xl shadow-2xl">
  <h1 class="text-3xl font-bold text-center mb-8 text-primary-400">Edit Your Profile</h1>
  
  <form action="/users/profile/edit" method="POST" enctype="multipart/form-data" class="space-y-6">
    <div>
      <label for="username" class="block text-sm font-medium text-gray-300 mb-1">Username</label>
      <input type="text" name="username" id="username" value="<%= user.username %>" required
             class="w-full p-3 rounded-md bg-gray-700 border border-gray-600 text-gray-100 focus:ring-2 focus:ring-primary-500 focus:border-primary-500" />
    </div>
    
    <div>
      <label for="email" class="block text-sm font-medium text-gray-300 mb-1">Email</label>
      <input type="email" name="email" id="email" value="<%= user.email %>" required
             class="w-full p-3 rounded-md bg-gray-700 border border-gray-600 text-gray-100 focus:ring-2 focus:ring-primary-500 focus:border-primary-500" />
    </div>

    <div>
      <label for="bio" class="block text-sm font-medium text-gray-300 mb-1">Bio (Optional)</label>
      <textarea name="bio" id="bio" rows="3" maxlength="250"
                class="w-full p-3 rounded-md bg-gray-700 border border-gray-600 text-gray-100 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                placeholder="Tell us a little about yourself..."><%= user.bio || '' %></textarea>
      <p class="mt-1 text-xs text-gray-500">Max 250 characters.</p>
    </div>

    <div>
         <label for="avatar" class="block text-sm font-medium text-gray-300 mb-1">Profile Picture (Optional)</label>
         <div class="flex items-center space-x-4">
             <img src="<%= user.avatar && user.avatar.url ? user.avatar.url : '/images/default-avatar.png' %>" alt="Current Avatar" class="w-20 h-20 rounded-full object-cover bg-gray-600">
             <input type="file" name="avatar" id="avatar" accept="image/*"
                     class="w-full text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary-500 file:text-white hover:file:bg-primary-600" />
         </div>
         <p class="mt-1 text-xs text-gray-500">Recommended: Square image, JPG or PNG.</p>
    </div>

    <div class="pt-2 flex space-x-4">
      <button type="submit" 
              class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition duration-150 ease-in-out text-lg flex items-center justify-center">
        <i class="fas fa-save mr-2"></i> Save Changes
      </button>
      <a href="/users/profile" class="flex-1 text-center bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-4 rounded-lg transition duration-150 ease-in-out text-lg">
        Cancel
      </a>
    </div>
  </form>
</div>

<%- include('./partials/footer') %>